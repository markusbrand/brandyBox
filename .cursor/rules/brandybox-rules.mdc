---
description: Brandy Box structure, OOP, packages, and doc regeneration
globs: client/**/*.py, backend/**/*.py
alwaysApply: true
---

# Brandy Box Conventions

- **Layout**: Client code lives under `client/brandybox/` in packages (api, auth, sync, ui). Backend code lives under `backend/app/` (auth, users, files, db). No global mutable state.
- **OOP**: Prefer classes for cohesive behavior (e.g. SyncEngine, BrandyBoxAPI, CredentialsStore). Use type hints and docstrings (Google or NumPy style) for public modules, classes, and key functions.
- **Docs**: When changing client or backend code, update or regenerate the project documentation. From repo root run `mkdocs build` (output in `site/`) or `mkdocs serve` for live preview.
- **Linux client install**: On Linux (e.g. Garuda/KDE), the venv-based install is the recommended way to avoid the recurring tray issue (square icon, no context menu). Document this in README, installers README, and docs/client/troubleshooting.md; see `.cursor/rules/linux-client-install.mdc` for details.
- **Run client (Linux)**: To start the client so the tray icon and context menu work, always run from **repo root** using the venv created with `--system-site-packages`: `cd <repo_root> && .venv/bin/python -m brandybox.main`. Do not run `python -m brandybox.main` from the client directory without this venv (missing deps) or with a venv created without `--system-site-packages` (square icon, no menu).
- **Git commits in Cursor**: To avoid the Source Control commit button hanging, always type the commit message in the "Message" field before clicking Commit. If you need to amend or the UI still hangs, use the terminal: `git commit -m "Your message"` or `git commit --amend`.
